{% extends "base.html" %}
{% block content %}
<h1 class="mb-4">Edit Transaction</h1>

<form method="post" enctype="multipart/form-data">
  <div class="mb-3">
    <label class="form-label">Date</label>
    <input type="date" name="date" class="form-control" value="{{ txn.date.strftime('%Y-%m-%d') }}" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Type</label>
    <select name="type" class="form-control">
      <option value="Income" {% if txn.type == "Income" %}selected{% endif %}>Income</option>
      <option value="Expense" {% if txn.type == "Expense" %}selected{% endif %}>Expense</option>
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">Category</label>
    <input type="text" name="category" class="form-control" value="{{ txn.category }}" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Party</label>
    <input type="text" name="party" class="form-control" value="{{ txn.party }}">
  </div>
  <div class="mb-3">
    <label class="form-label">Description</label>
    <input type="text" name="description" class="form-control" value="{{ txn.description }}">
  </div>
  <div class="mb-3">
    <label class="form-label">Amount</label>
    <input type="number" step="0.01" name="amount" class="form-control" value="{{ txn.amount }}" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Status</label>
    <select name="status" class="form-control">
      <option value="Paid" {% if txn.status == "Paid" %}selected{% endif %}>Paid</option>
      <option value="Pending" {% if txn.status == "Pending" %}selected{% endif %}>Pending</option>
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">Receipt</label>
    <input type="file" name="receipt" class="form-control">
    {% if txn.receipt_path %}
      <p>Current: <a href="{{ '/' + txn.receipt_path }}" target="_blank">view</a></p>
    {% endif %}
  </div>
  <button type="submit" class="btn btn-success">Save Changes</button>
  <a href="{{ url_for('transactions') }}" class="btn btn-secondary">Cancel</a>
</form>
{% endblock %}